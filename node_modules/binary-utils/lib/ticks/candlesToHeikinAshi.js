"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var firstHeikinAshi = function firstHeikinAshi(candle) {
  return {
    open: (candle.open + candle.close) / 2,
    high: candle.high,
    low: candle.low,
    close: (candle.open + candle.high + candle.low + candle.close) / 4
  };
};

var singleHeikinAshi = function singleHeikinAshi(cur, prev) {
  return {
    open: (prev.open + prev.close) / 2,
    high: Math.max(cur.high, prev.open, prev.close),
    low: Math.min(cur.low, prev.open, prev.close),
    close: (cur.open + cur.high + cur.low + cur.close) / 4
  };
};

exports.default = function (candles) {
  return candles.reduce(function (list, x, idx) {
    var heikinAshi = idx === 0 ? firstHeikinAshi(x) : singleHeikinAshi(x, list[idx - 1]);
    list.push(heikinAshi);
    return list;
  }, []);
};